<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<title>wBluetooth</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="css/style.css">
<script src="cordova.js"></script>
<script src="bluetoothSerial.js"></script>
<script src="js/jquery-1.11.2.min.js"></script>
<script>
var connect = false;
// var bluetoothSerial = cordova.require('bluetoothSerial');

$(document).ready(function(e) {
    $("#connect").click(function(e) {
        var macAddress = $("#select-dv").val();
		if (macAddress==0) {
			window.alert("Select Devices");
			return;
		}
		
		cordova.exec(function() {
			window.alert("Connect OK.");
		}, function() {
			window.alert("Connect error !");
		}, "BluetoothSerial", "connect", [macAddress]);
    });
	
	cordova.exec(function(devices) {
		var html = "";
		devices.forEach(function(device) {
			html += "<option value=\"" + device.address + "\">" + device.name + "<\/option>";
		});
		window.alert(html);
		$("#select-dv").html(html);
	}, function() {
		window.alert("List device error.");
	}, "BluetoothSerial", "list", []);
});
</script>
</head>

<body>
<header>
  <h1 id="title">wBluetooth</h1>
</header>
<div class="form-dv">
  <div class="dv">
    <select id="select-dv">
      <option value="0">Devices...</option>
    </select>
  </div>
  <button id="connect">Connect</button>
</div>
</body>
</html>
