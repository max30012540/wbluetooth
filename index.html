<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<title>wBluetooth</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="css/style.css">
<script>
var JSFile = ['cordova.js', 'js/jquery-1.11.2.min.js'];
for (i = 0; i<JSFile.length;i++)
	document.write('<script src="' + JSFile[i] + '"><\/script>');
</script>
<script>
var connect = false;
var bluetoothSerial = cordova.require('bluetoothSerial');

$(document).ready(function(e) {
    $("#connect").click(function(e) {
        var macid = $("#select-dv").val();
		if (macid==0) {
			window.alert("Select Devices");
			return;
		}
		bluetoothSerial.connect(macid, function() {
			window.alert("Connect OK.");
		}, function() {
			window.alert("Connect error !");
		});
    });
	
	bluetoothSerial.list(function(devices) {
		var html = "";
		devices.forEach(function(device) {
			html += "<option value=\"" + device.address + "\">" + device.name + "<\/option>";
		});
		$("#select").html(html);
	}, function() {
		window.alert("List device error.");
	});
});
</script>
</head>

<body onload="onLoad()">
<header>
  <h1 id="title">wBluetooth</h1>
</header>
<div class="form-dv">
  <div class="dv">
    <select id="select-dv">
      <option value="0">Devices...</option>
    </select>
  </div>
  <button id="connect">Connect</button>
</div>
</body>
</html>
